<div class="kpi-card" [ngClass]="'status-' + status">
  <div class="kpi-header">
    <h4 class="kpi-title">{{ title }}</h4>

    <!-- Status indicator (traffic light) -->
    <div *ngIf="status !== 'neutral'" class="status-indicator">
      <div class="status-dot"></div>
    </div>
  </div>

  <div class="kpi-body">
    <!-- Primary value display -->
    <div class="kpi-value-container">
      <div class="kpi-value">{{ primaryValue }}</div>
      <div *ngIf="primaryUnit" class="kpi-unit">{{ primaryUnit }}</div>
    </div>

    <!-- Secondary value (if provided) -->
    <div *ngIf="secondaryValue" class="kpi-secondary">
      <div class="secondary-value">{{ secondaryValue }}</div>
      <div *ngIf="secondaryUnit" class="secondary-unit">{{ secondaryUnit }}</div>
    </div>

    <!-- Trend indicator (if provided) -->
    <div *ngIf="trend" class="kpi-trend" [ngClass]="{
      'trend-up': trend.direction === 'up',
      'trend-down': trend.direction === 'down',
      'trend-positive': trend.isPositive,
      'trend-negative': !trend.isPositive
    }">
      <div class="trend-arrow">
        <svg *ngIf="trend.direction === 'up'" viewBox="0 0 24 24" width="16" height="16">
          <path d="M7 14l5-5 5 5z"></path>
        </svg>
        <svg *ngIf="trend.direction === 'down'" viewBox="0 0 24 24" width="16" height="16">
          <path d="M7 10l5 5 5-5z"></path>
        </svg>
        <svg *ngIf="trend.direction === 'neutral'" viewBox="0 0 24 24" width="16" height="16">
          <path d="M5 12h14"></path>
        </svg>
      </div>
      <div class="trend-value">{{ trend.value >= 0 ? '+' : '' }}{{ trend.value.toFixed(1) }}%</div>
    </div>
  </div>

  <!-- Footer content (if provided) -->
  <div *ngIf="footerText" class="kpi-footer">
    {{ footerText }}
  </div>

  <!-- Optional chart/sparkline -->
  <div *ngIf="sparklinePath" class="kpi-sparkline">
    <svg width="100%" height="40" viewBox="0 0 100 40" preserveAspectRatio="none">
      <path [attr.d]="sparklinePath" class="sparkline-path"></path>
      <circle *ngIf="sparklineEndPoint"
              [attr.cx]="sparklineEndPoint.x"
              [attr.cy]="sparklineEndPoint.y"
              r="2"
              class="sparkline-point"></circle>
    </svg>
  </div>
</div>
